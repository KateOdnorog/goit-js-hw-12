{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// HTTP запити\n\nimport axios from 'axios';\n\nconst API_KEY = '48902989-5d77fe06f72350c30855133ec';\n\nexport default async function findImages(query, page, perPage) {\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  const params = {\n    key: API_KEY,\n    q: query,\n    per_page: perPage,\n    page: page,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n\n  return await axios.get(BASE_URL, { params });\n}\n","// відбраження елементів\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport default function createHTML(data) {\n  const refs = {\n    list: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n  };\n\n  function imageTemplate(item) {\n    const {\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    } = item;\n    return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n          </a>\n          <div class=\"gallery-list-container\">\n            <div class=\"field\">\n              <span class=\"name-field\">Likes</span>\n              <span class=\"value\">${likes}</span>\n            </div>\n            <div class=\"field\">\n              <span class=\"name-field\">Views</span>\n              <span class=\"value\">${views}</span>\n            </div>\n            <div class=\"field\">\n              <span class=\"name-field\">Comments</span>\n              <span class=\"value\">${comments}</span>\n            </div>\n            <div class=\"field\">\n              <span class=\"name-field\">Downloads</span>\n              <span class=\"value\">${downloads}</span>\n            </div>\n          </div>\n          </li>\n`;\n  }\n\n  function imagesTemplate(items) {\n    return items.map(imageTemplate).join('');\n  }\n\n  const markup = imagesTemplate(data);\n  refs.list.insertAdjacentHTML('beforeend', markup);\n\n  let lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    animationSpeed: 250,\n  });\n  lightbox.refresh();\n}\n","import findImages from './js/pixabay-api.js';\nimport createHTML from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  btnSearch: document.querySelector('.btn-search'),\n  input: document.querySelector('.input-field'),\n  loaderImage: document.querySelector('.loader'),\n  btnLoadMore: document.querySelector('.btn-load'),\n  gallery: document.querySelector('.gallery'),\n  loaderBtn: document.querySelector('.loader2'),\n};\n\nconst params = {\n  query: null,\n  page: 1,\n  total: null,\n  perPage: 40,\n};\n\n// ==============================================\n\nrefs.form.addEventListener('submit', handleSubmit);\n\nasync function handleSubmit(e) {\n  e.preventDefault();\n\n  params.query = refs.input.value.trim();\n  params.page = 1;\n\n  if (params.query === '') {\n    iziToast.warning({\n      position: 'topRight',\n      title: 'WARN',\n      message: 'You have not specified any search parameters.',\n    });\n  }\n\n  clear();\n  showLoader();\n\n  try {\n    const result = await findImages(params.query, params.page, params.perPage);\n    if (result.data.hits.length === 0) {\n      clear();\n      hideLoader();\n\n      iziToast.error({\n        title: 'ERROR',\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        position: 'topRight',\n      });\n    }\n\n    createHTML(result.data.hits);\n    params.total = result.data.totalHits;\n    checkBtnStatus();\n    console.log(checkBtnStatus);\n  } catch {\n    clear();\n    hideLoader();\n\n    iziToast.error({\n      title: 'ERROR',\n      message: `Error fetching images: ${error}`,\n      position: 'topRight',\n    });\n  }\n\n  hideLoader();\n  e.target.reset();\n}\n\n// ==============================================\nrefs.btnLoadMore.addEventListener('click', inputLoad);\n\nasync function inputLoad() {\n  params.page += 1;\n  showLoader();\n\n  const result = await findImages(params.query, params.page);\n  createHTML(result.data.hits);\n\n  checkBtnStatus();\n  hideLoader();\n\n  scrollPage();\n}\n// ==============================================\n\nfunction showLoader() {\n  refs.loaderImage.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  refs.loaderImage.classList.add('hidden');\n}\n\nfunction clear() {\n  refs.gallery.innerHTML = '';\n}\n\n// ==============================================\n\nfunction showBtnLoadMore() {\n  refs.btnLoadMore.classList.remove('hidden');\n  refs.loaderBtn.classList.add('hidden');\n}\n\nfunction hideBtnLoadMore() {\n  refs.btnLoadMore.classList.add('hidden');\n  refs.loaderBtn.classList.remove('hidden');\n}\n\nfunction checkBtnStatus() {\n  const perPage = params.perPage;\n  const maxPage = Math.ceil(params.total / perPage);\n\n  if (params.page >= maxPage) {\n    hideBtnLoadMore();\n\n    iziToast.info({\n      position: 'topRight',\n      title: 'INFO',\n      message: `We're sorry, but you've reached the end of search results.`,\n    });\n  } else {\n    showBtnLoadMore();\n  }\n}\n// ==============================================\n\nfunction scrollPage() {\n  const info = refs.gallery.lastElementChild.getBoundingClientRect();\n  const height = info.height + 100;\n  scrollBy({\n    behavior: 'smooth',\n    top: height * 3,\n  });\n}\n"],"names":["API_KEY","findImages","query","page","perPage","BASE_URL","params","axios","createHTML","data","refs","imageTemplate","item","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","items","markup","SimpleLightbox","handleSubmit","e","iziToast","clear","showLoader","result","hideLoader","checkBtnStatus","inputLoad","scrollPage","showBtnLoadMore","hideBtnLoadMore","maxPage","height"],"mappings":"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"}