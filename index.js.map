{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// HTTP запити\n\nimport axios from 'axios';\n\nconst API_KEY = '48902989-5d77fe06f72350c30855133ec';\n\nexport default async function findImages(query, page, perPage) {\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  const params = {\n    key: API_KEY,\n    q: query,\n    pageSize: perPage,\n    page: page,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n\n  return await axios.get(BASE_URL, { params });\n}\n","// відбраження елементів\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport default function createHTML(data) {\n  const refs = {\n    list: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n  };\n\n  function imageTemplate(item) {\n    const {\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    } = item;\n    return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n          </a>\n          <div class=\"gallery-list-container\">\n            <div class=\"field\">\n              <span class=\"name-field\">Likes</span>\n              <span class=\"value\">${likes}</span>\n            </div>\n            <div class=\"field\">\n              <span class=\"name-field\">Views</span>\n              <span class=\"value\">${views}</span>\n            </div>\n            <div class=\"field\">\n              <span class=\"name-field\">Comments</span>\n              <span class=\"value\">${comments}</span>\n            </div>\n            <div class=\"field\">\n              <span class=\"name-field\">Downloads</span>\n              <span class=\"value\">${downloads}</span>\n            </div>\n          </div>\n          </li>\n`;\n  }\n\n  function imagesTemplate(items) {\n    return items.map(imageTemplate).join('');\n  }\n\n  const markup = imagesTemplate(data);\n  refs.list.insertAdjacentHTML('beforeend', markup);\n\n  let lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    animationSpeed: 250,\n  });\n  lightbox.refresh();\n}\n","import findImages from './js/pixabay-api.js';\nimport createHTML from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  btnSearch: document.querySelector('.btn-search'),\n  input: document.querySelector('.input-field'),\n  loader: document.querySelector('.loader'),\n  btnLoad: document.querySelector('.btn-load'),\n  gallery: document.querySelector('.gallery'),\n  loaderBtn: document.querySelector('.loader2'),\n};\n\nconst params = {\n  query: null,\n  page: null,\n  total: null,\n  perPage: 40,\n};\n\n// ==============================================\n\nrefs.form.addEventListener('submit', handleSubmit);\n\nasync function handleSubmit(e) {\n  e.preventDefault();\n\n  params.query = refs.input.value.trim();\n  params.page = 1;\n\n  if (params.query === '') {\n    iziToast.warning({\n      position: 'topRight',\n      title: 'WARN',\n      message: 'You have not specified any search parameters.',\n    });\n  }\n\n  clear();\n  hideBtnLoad();\n  showLoader();\n\n  try {\n    const result = await findImages(params.query, params.page, params.perPage);\n    if (result.data.hits.length === 0) {\n      clear();\n      hideLoader();\n\n      iziToast.error({\n        title: 'ERROR',\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        position: 'topRight',\n      });\n    }\n    createHTML(result.data.hits);\n    params.total = result.data.totalHits;\n    checkBtnStatus();\n  } catch {\n    clear();\n    hideLoader();\n\n    iziToast.error({\n      title: 'ERROR',\n      message: `Error fetching images: ${error}`,\n      position: 'topRight',\n    });\n  }\n\n  hideLoader();\n  e.target.reset();\n}\n\n// ==============================================\nrefs.btnLoad.addEventListener('input', inputLoad);\n\nasync function inputLoad(e) {\n  params.page += 1;\n\n  showLoaderBtn();\n  checkBtnStatus();\n\n  const result = await findImages(params.query, params.page, params.perPage);\n  createHTML(result.data.hits);\n\n  removeLoaderBtn();\n\n  scrollPage();\n}\n// ==============================================\n\nfunction showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  refs.loader.classList.add('hidden');\n}\n\nfunction clear() {\n  refs.gallery.innerHTML = '';\n}\n\nfunction showBtnLoad() {\n  refs.btnLoad.disabled = false;\n}\n\nfunction hideBtnLoad() {\n  refs.btnLoad.disabled = true;\n}\n\nfunction checkBtnStatus() {\n  const perPage = 40;\n  const maxPage = Math.ceil(params.total / perPage);\n\n  if (params.page >= maxPage) {\n    hideBtnLoad();\n\n    iziToast.info({\n      position: 'topRight',\n      title: 'INFO',\n      message: `We're sorry, but you've reached the end of search results.`,\n    });\n  } else {\n    showBtnLoad();\n  }\n}\n\nfunction showLoaderBtn() {\n  refs.loaderBtn.classList.remove('hidden');\n}\n\nfunction removeLoaderBtn() {\n  refs.loaderBtn.classList.add('hidden');\n}\n\nfunction scrollPage() {\n  const info = refs.gallery.firstElementChild.getBoundingClientRect();\n  const height = info.height;\n  scrollBy({\n    behavior: 'smooth',\n    top: height * 2,\n  });\n}\n"],"names":["API_KEY","findImages","query","page","perPage","BASE_URL","params","axios","createHTML","data","refs","imageTemplate","item","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","items","markup","SimpleLightbox","handleSubmit","e","iziToast","clear","hideBtnLoad","showLoader","result","hideLoader","checkBtnStatus","inputLoad","showLoaderBtn","removeLoaderBtn","scrollPage","showBtnLoad","maxPage","height"],"mappings":"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"}