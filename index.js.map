{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// HTTP запити\n\nimport axios from 'axios';\n\nconst API_KEY = '48902989-5d77fe06f72350c30855133ec';\n\nexport default async function findImages(query, page, perPage) {\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  const params = {\n    key: API_KEY,\n    q: query,\n    per_page: perPage,\n    page: page,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n\n  return await axios.get(BASE_URL, { params });\n}\n","// відбраження елементів\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport default function createHTML(data) {\n  const refs = {\n    list: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n  };\n\n  function imageTemplate(item) {\n    const {\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    } = item;\n    return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n          </a>\n          <div class=\"gallery-list-container\">\n            <div class=\"field\">\n              <span class=\"name-field\">Likes</span>\n              <span class=\"value\">${likes}</span>\n            </div>\n            <div class=\"field\">\n              <span class=\"name-field\">Views</span>\n              <span class=\"value\">${views}</span>\n            </div>\n            <div class=\"field\">\n              <span class=\"name-field\">Comments</span>\n              <span class=\"value\">${comments}</span>\n            </div>\n            <div class=\"field\">\n              <span class=\"name-field\">Downloads</span>\n              <span class=\"value\">${downloads}</span>\n            </div>\n          </div>\n          </li>\n`;\n  }\n\n  function imagesTemplate(items) {\n    return items.map(imageTemplate).join('');\n  }\n\n  const markup = imagesTemplate(data);\n  refs.list.insertAdjacentHTML('beforeend', markup);\n\n  let lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    animationSpeed: 250,\n  });\n  lightbox.refresh();\n}\n","import findImages from './js/pixabay-api.js';\nimport createHTML from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  btnSearch: document.querySelector('.btn-search'),\n  input: document.querySelector('.input-field'),\n  loaderImage: document.querySelector('.loader'),\n  btnLoadMore: document.querySelector('.btn-load'),\n  gallery: document.querySelector('.gallery'),\n  loaderBtn: document.querySelector('.loader2'),\n};\n\nconst params = {\n  query: null,\n  page: 1,\n  total: null,\n  perPage: 40,\n};\n\n// ==============================================\n\nrefs.form.addEventListener('submit', handleSubmit);\n\nasync function handleSubmit(e) {\n  e.preventDefault();\n\n  params.query = refs.input.value.trim();\n  params.page = 1;\n\n  if (params.query === '') {\n    return iziToast.warning({\n      position: 'topRight',\n      title: 'WARN',\n      message: 'You have not specified any search parameters.',\n    });\n  }\n\n  clear();\n  showLoader();\n\n  try {\n    const result = await findImages(params.query, params.page, params.perPage);\n    if (result.data.hits.length === 0) {\n      clear();\n      hideLoader();\n      return iziToast.error({\n        title: 'ERROR',\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        position: 'topRight',\n      });\n    }\n\n    createHTML(result.data.hits);\n    params.total = result.data.totalHits;\n    checkBtnStatus();\n  } catch (error) {\n    clear();\n    hideLoader();\n\n    return iziToast.error({\n      title: 'ERROR',\n      message: `Error fetching images: ${error}`,\n      position: 'topRight',\n    });\n  }\n\n  hideLoader();\n  e.target.reset();\n}\n\n// ==============================================\nrefs.btnLoadMore.addEventListener('click', LoadBtn);\n\nasync function LoadBtn() {\n  params.page += 1;\n  showLoaderBtn();\n  checkBtnStatus();\n\n  try {\n    const result = await findImages(params.query, params.page, params.perPage);\n    createHTML(result.data.hits);\n    scrollPage();\n  } catch {\n    hideLoaderBtn();\n    return iziToast.error({\n      title: 'ERROR',\n      message: `Failed to load more images! ${error}`,\n      position: 'topRight',\n    });\n  }\n\n  hideLoaderBtn();\n}\n// ==============================================\n\nfunction showLoader() {\n  refs.loaderImage.classList.remove('visually-hidden');\n}\n\nfunction hideLoader() {\n  refs.loaderImage.classList.add('visually-hidden');\n}\n\nfunction clear() {\n  refs.gallery.innerHTML = '';\n}\n\n// ==============================================\n\nfunction showBtnLoadMore() {\n  refs.btnLoadMore.classList.remove('visually-hidden');\n}\n\nfunction hideBtnLoadMore() {\n  refs.btnLoadMore.classList.add('visually-hidden');\n}\n\nfunction checkBtnStatus() {\n  const maxPage = Math.ceil(params.total / params.perPage);\n\n  if (params.page >= maxPage) {\n    hideBtnLoadMore();\n\n    return iziToast.info({\n      position: 'topRight',\n      title: 'INFO',\n      message: `We're sorry, but you've reached the end of search results.`,\n    });\n  } else {\n    showBtnLoadMore();\n  }\n}\n// ==============================================\n\nfunction showLoaderBtn() {\n  refs.loaderBtn.classList.remove('visually-hidden');\n}\n\nfunction hideLoaderBtn() {\n  refs.loaderBtn.classList.add('visually-hidden');\n}\n\nfunction scrollPage() {\n  const info = refs.gallery.lastElementChild.getBoundingClientRect();\n  const height = info.height + 100;\n  scrollBy({\n    behavior: 'smooth',\n    top: height * 3,\n  });\n}\n"],"names":["API_KEY","findImages","query","page","perPage","BASE_URL","params","axios","createHTML","data","refs","imageTemplate","item","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","items","markup","SimpleLightbox","handleSubmit","e","iziToast","clear","showLoader","result","hideLoader","checkBtnStatus","error","LoadBtn","showLoaderBtn","scrollPage","hideLoaderBtn","showBtnLoadMore","hideBtnLoadMore","maxPage","height"],"mappings":"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"}